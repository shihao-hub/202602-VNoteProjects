要实现“拉取远程代码并强制覆盖本地所有修改和提交”，最安全且标准的做法是分两步走：先**重置（Reset）本地分支到远程状态，再清理**未跟踪的文件。

请按照以下步骤操作：

### 核心步骤（推荐）

假设你要操作的分支是 `main`（如果是其他分支，请将 `main` 替换为你的分支名，如 `master` 或 `develop`）。

#### 1\. 获取远程最新信息

首先确保本地知道远程的最新状态：

```bash
git fetch origin
```

#### 2\. 强制重置本地分支

这一步会将你的本地分支指针强行指向远程分支，**丢弃**你本地所有的提交历史差异，并**覆盖**所有已追踪文件的修改：

```bash
git reset --hard origin/main
```

-   **注意**：`origin/main` 表示远程仓库的 main 分支。如果你当前就在 main 分支上，也可以简写为 `git reset --hard @{u}`。
    

#### 3\. (可选) 清理未跟踪的文件

上面的命令只会覆盖 Git 已经管理的文件。如果你本地新建了一些文件（未 `git add` 过的），它们还会存在。如果你想连这些新文件也全部删掉，让本地和远程**完全一模一样**：

```bash
git clean -fd
```

-   `-f`: 强制删除。
    
-   `-d`: 包括删除目录。
    
-   **警告**：这会永久删除所有未添加到 Git 的新文件和新文件夹，请务必确认里面没有重要数据！
    

---

### 一键命令组合

如果你想一条命令完成所有操作（假设当前分支是 `main`）：

```bash
git fetch origin && git reset --hard origin/main && git clean -fd
```

### ⚠️ 重要风险提示

在执行上述操作前，请再次确认：

1.  **数据丢失不可逆**：你本地所有**未推送**的提交、**未暂存**的修改、**新建**的文件都将被永久删除。
    
2.  **备份建议**：如果你不确定是否真的需要丢弃所有内容，可以先创建一个备份分支：
    
    ```bash
    git branch backup-before-reset
    ```
    
    这样即使操作错了，还可以切回 `backup-before-reset` 找回代码。
    

### 常见错误排查

如果执行 `git reset --hard` 时报错，提示 "Your local changes to the following files would be overwritten by merge"，通常是因为你有未提交的更改。`--hard` 本应强制覆盖，但如果涉及文件锁定或特殊权限问题，可能需要先 stash（暂存）一下再 drop（丢弃）：

```bash
# 备选方案：先暂存，再重置，最后丢弃暂存
git stash push -m "backup-before-force"
git reset --hard origin/main
git stash drop
```

*(通常直接使用* `git reset --hard` *即可，无需此备选方案)*