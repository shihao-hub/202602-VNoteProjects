# ai使用感悟

## 钛动科技 ai coding 感悟

### 邮件服务项目

#### 我对 spec coding 三份核心文档的当前认知与处理策略

spec coding 非常适合复杂需求。

对目前的我来说，`requirements.md` 文件是必须要看的，必须要按照自己当前理解去和 ai 讨论修改的。

至于 `design.md` 文件，需要尽可能地去阅读，未来的目标是和 `requirements.md` 文件一样，**完全检阅**。

最后是 `tasks.md` 文件，我目前的看法是不必看，这个认知暂且这样保持吧（2026-02-10）。

#### 少开会话，多做计划：避免认知过载

需求差异极大的情况下，才可以使用 `git worktree`

对于一个主题需求的开发，应当减少同时打开的会话数量，建议用一个临时文档进行提示词的排队和完善。

我最理想的情况是：只开 1~3 个能快速响应的会话，其余任务，一律记录下来进行排队处理，过程中 还可以让 gemini 等 ai 帮你优化你的提示词，甚至与它们沟通过程中还能增强对任务的理解。

为什么要这样做：任务并行过多，且对需求理解不足的情况下，会导致脑子浆糊。其实这时候采用上面的措施也足以，总之就是计划先行（2026-02-10）。

#### 审还是不审？取决于你对任务的理解程度

通过对功能的判断，决定 ai 代码的 review 程度，不要 100% review 代码，也不要不 review 代码。

简单看法：

1.  对接下来的任务有明确的认识，或者脑子里已经清楚怎么实现，可以减少甚至不 review 代码
    
2.  对接下来的任务感觉困惑，可以先不着急让 ai 写代码，哪怕写了，也最好 review 后与其沟通
    
3.  代码看情况 review，方案最好 100% review，但是这取决于使用者的能力，没有定式
    
4.  用 ai 做不懂的东西，需要严格补充测试用例，把自己当成 qa（质量保证、测试工程师），把 ai 实现的东西当作黑盒去测试
    

#### 明确 Bruno 的角色：Git 友好的接口调试与场景测试工具

bruno 适合做场景测试：

给 ai 讲述一段用户故事或者行为，让它基于当前的 fastapi 接口实现 bruno 的接口

> 记得在接口变更后，让 ai 同步更新 .bru 脚本

---

bruno 的本职工作：

替代 reqable/postman 等工具，进行基本的接口调用，优点自然是可以用 git 管理和追踪

但是我有个困惑，bruno 源代码中的测试，更像是全都运行一遍，似乎没有看到基本的接口调用存在？应该是可以通过 folder.bru 文件 ignore 掉的。只是我总是喜欢纠结目录结构...

---

API 测试或者单元测试等推荐使用 pytest + TestClient

#### AI 编程时代，我们该如何做 Code Review

[程序员AI编程模式-要不要100%代码Review](https://www.bilibili.com/video/BV1kgrRBbEzR)

评论区：

```txt
大厨海森堡转生：
我觉得code review不如spec review➕测试方案review，主要还是效率上的考虑
    人月聊IT：
    是的。 

小人物87654321：
review 编码 不如review方案收益高 除非冷门技术热门技术方案做的细 task写的细 核心流程 算法都交代清除 使用高级点的模型很少出问题 在配合测试用例 保证质量 除非有什么设计缺陷 否则几乎没有问题 就算有设计缺陷 你人工审核代码的时候也会很难发现 我有段时间测试环境都不上 本地测试通过了 集成测试跑下 大概看看几分钟 直接上生产 几乎没出现过问题 出现了也是那种极端情况即使我人工仔细看了也看不出来

Nukazzz：
1.基于需求生成架构设计
2.基于架构设计生成task list
3.基于task list生成测试
4.基于task list生成代码
5.运行测试并修复报错

以上每个任务分配一个agent，避免上下文污染
配合Skills等规范进行约束
    猴仔粑粑：
    我倾向于你这种思路。问题越早暴露越好，每层都验收。 
    
该昵称因重复无法显示：
讲需求转化为描述精确的文档之后，ai能做出来不那么大的项目这一点感觉没问题。但是有一些其他点，一是感觉用的人自身肯定还是要真正有编程能力的，有的人用ai写完，不出问题还好，有时候出了问题，让ai去改，ai还是抽风，改不好，这时候程序员还是要有兜底能力。二是都这样全部交给ai编写的话，编程技术本身是不是会发展停滞呢，毕竟ai用的训练数据，感觉没法自己推动技术进步吧，比如之前一直推崇oop，近些年人们又研究出优先用组合的方式。创新可能就是在工程中解决碰到的难点，写的难受之类的问题的时候想出来的吧，我们现在肯定不敢说编程已经发展到了最终阶段，假如说现在的ai是在oop盛行时代出来的，我们还会有后面的组合思想，组件式开发之类的吗

中国才是世界希望：
每次改动都提交git，提交前对比下差异，把差异部分过一遍心里有数就行了。粒度自己把控。

bili_71006454005：
简单的crud的活，我觉得快速过一下就行，复杂的业务确实要做好codereview，个人观点，代码必须要人要能力手动维护斗地

kadyvivian：
代码生成的时候你闲着干嘛 不能review吗

_阳光照进回忆：
我同意只要把需求场景规则这些前置条件说清楚，ai就能自己完成。但现实是复杂的系统下程序员自己也有很多考虑不到的，更不用说那么多的隐藏知识点，所以把前置说清楚是个伪命题。
    微风簇细浪：
    对，我自己就有这个感觉，隐藏的X变量
    小熊宝宝呀：
    说起来就是人的知识的深度和广度不如计算机。很多时候ai给的代码我自己都没考虑到
    qiaoxingxing：
    我还以为是我水平不行，很多事情事前都考虑不到，只有做的过程中才慢慢想清楚 
    
冬眠大雪飞：
简单的增删改查给AI干没有问题，但是复杂的需求依然需要人的主导。另外，我认为ai时代，反而对技术要求是高的。技术分为广度和深度，两者有一长就算技术高。随着ai coding的发展，对人review的要求也在上升，也是对技术上的高要求。

afumubit：
在项目之初、整体架构和代码实现方面，程序员必须了解其底层原理。整个架构是如何设计的，每一行代码是怎么写的，以及底层应该如何调用，这些都必须理解。如果不理解，遇到问题就很难解决。AI有时在上下文不一致的情况下，也很难理解这些。
代码是否需要Review，要分情况看。如果代码涉及重大的业务改动，并且我们评估其对业务影响较大，那肯定要逐行Review。
如果是一些边缘的业务代码，影响不大，其实就没必要Review。这要求程序员本身对整个项目有很深的理解。不可能完全从零开始，全都让AI实现，然后程序员一行代码都不看。那样的话，程序员对项目架构和实现逻辑会逐渐生疏，最终导致项目容易崩溃，陷入技术债务。
如果我们平时写的不是业务代码，而是自己做一些小工具，或者使用场景不高的代码，那肯定不需要Review，我们只需要结果就行。但对于生产级别的、对业务影响非常大的代码，那肯定要逐行Review。
至少我自己在写代码的时候，一定会关注整个架构、实现逻辑和代码质量。如果他写的代码函数职责不单一、文件职责不单一，或者架构不合理，我肯定会让他改。而让他改的前提，是我必须对整个业务非常熟悉。即使某些小函数的具体实现我可能不太理解，但整体的逻辑我一定要理解的。

54376998084_bili：
关键不是review，关键是谁改。
要自己改就得百分百读懂代码逻辑，要ai改则只需要测试用例全覆盖然后返bug就行了。
现在的矛盾点就是ai改bug经常上下文超长导致顾头不顾尾，改一个加三个最后还是要人改。
```